{"remainingRequest":"/Users/ricardo/Desktop/article-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ricardo/Desktop/article-system/weekly/.vuepress/components/EnvDetect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ricardo/Desktop/article-system/weekly/.vuepress/components/EnvDetect.vue","mtime":1568787218469},{"path":"/Users/ricardo/Desktop/article-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ricardo/Desktop/article-system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ricardo/Desktop/article-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ricardo/Desktop/article-system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBlbnYgZnJvbSAnQC91dGlscy9icm93c2Vyc0Vudmlyb25tZW50JwppbXBvcnQgewogICAgYW5kcm9pZE9wZW5BcHAsCiAgICBhbmRyb2lkRG93bmxvYWQKfSBmcm9tICdAL2FwaS9hcHBCYXNlL2FuZHJvaWQnCmltcG9ydCB7CiAgICBpb3NEb3dubG9hZCwKICAgIGlvc09wZW5BcHAKfSBmcm9tICdAL2FwaS9hcHBCYXNlL2lvcycKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0VudkRldGVjdCcsCiAgICBwcm9wczogWyJpb3MiLCAiYW5kcm9pZCJdLAogICAgbWV0aG9kczogewogICAgICAgIGNsaWNrSGFuZGxlcigpIHsKICAgICAgICAgICAgbGV0IGFuZHIgPSB0aGlzLmFuZHJvaWQsCiAgICAgICAgICAgICAgICBpb3MgPSB0aGlzLmlvcywKICAgICAgICAgICAgICAgIHRWZXJzaW9uID0gZW52LnRvd29yZHMudmVyc2lvbgogICAgICAgICAgICBpZiAoZW52LnRoaXJkUGFydHkpIHsKICAgICAgICAgICAgICAgIHRoaXMudG9Ccm93c2VyKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW52LnRvd29yZHMuaXN0b3dvcmRzKSB7CiAgICAgICAgICAgICAgICBpZiAoZW52Lm9zLmFuZHJvaWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodFZlcnNpb24gPj0gYW5kci52ZXJzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFuZHIuY2IgJiYgYW5kci5jYigpCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYW5kcm9pZERvd25sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbnYub3MuaW9zKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRWZXJzaW9uID49IGlvcy52ZXJzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlvcy5jYiAmJiBpb3MuY2IoKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlvc0Rvd25sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGVudi5vcy5hbmRyb2lkKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FwcCcpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGFuZHJvaWRPcGVuQXBwKCkKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW52Lm9zLmlvcykgewogICAgICAgICAgICAgICAgICAgIGlvc09wZW5BcHAoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyAxLnRoaXJkIHBhcnR5CiAgICAgICAgZGlhbG9nQm94KG9wdCkgewogICAgICAgICAgICB2YXIgaW1hZ2VDbGFzc05hbWUgPSBvcHQuaW1hZ2VDbGFzc05hbWUsCiAgICAgICAgICAgICAgICBpbWFnZSA9IG9wdC5pbWFnZQogICAgICAgICAgICB2YXIgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGJveC5jbGFzc05hbWUgPSAnZGlhbG9nIGRpYWxvZy1iZyc7CiAgICAgICAgICAgIGJveC5pbm5lckhUTUwgKz0gJzxpbWcgY2xhc3M9IicgKyBpbWFnZUNsYXNzTmFtZSArICciIHNyYz0iJyArIGltYWdlICsgJyIvPicKICAgICAgICAgICAgYm94LmlubmVySFRNTCArPSAnICAgIDwvZGl2Pic7CiAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIG9wdC5jYW5jZWwgJiYgb3B0LmNhbmNlbChjbG9zZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChib3gpOwogICAgICAgICAgICBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgICAgICAgICAgIGJveC5zdHlsZS5hbmltYXRpb24gPSAnZmFkZU91dCAuMnMgbGluZWFyJzsKICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYm94KTsKICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9Ccm93c2VyKGNiKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nQm94KHsKICAgICAgICAgICAgICAgIGltYWdlOiAnaHR0cHM6Ly9vZmZpY2lhbC13ZWIub3NzLWNuLWJlaWppbmcuYWxpeXVuY3MuY29tL3Rvd29yZHMvYXZhdGFycy93ZWNoYXRfYmcucG5nJywKICAgICAgICAgICAgICAgIGltYWdlQ2xhc3NOYW1lOiAndG8tYnJvd3NlcicsCiAgICAgICAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uKGNsb3NlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNiICYmIChjYiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYihjbG9zZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyB0aGlyZCBwYXJ0eSBlbmQKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7fQogICAgfQp9Cg=="},{"version":3,"sources":["EnvDetect.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EnvDetect.vue","sourceRoot":"weekly/.vuepress/components","sourcesContent":["<template>\n    <div @click=\"clickHandler\">\n        <slot name=\"content\"></slot>\n    </div>\n</template>\n\n<script type='text/javascript'>\n    import env from '@/utils/browsersEnvironment'\n    import {\n        androidOpenApp,\n        androidDownload\n    } from '@/api/appBase/android'\n    import {\n        iosDownload,\n        iosOpenApp\n    } from '@/api/appBase/ios'\n    export default {\n        name: 'EnvDetect',\n        props: [\"ios\", \"android\"],\n        methods: {\n            clickHandler() {\n                let andr = this.android,\n                    ios = this.ios,\n                    tVersion = env.towords.version\n                if (env.thirdParty) {\n                    this.toBrowser();\n                } else if (env.towords.istowords) {\n                    if (env.os.android) {\n                        if (tVersion >= andr.version) {\n                            andr.cb && andr.cb()\n                        } else {\n                            androidDownload();\n                        }\n                    } else if (env.os.ios) {\n                        if (tVersion >= ios.version) {\n                            ios.cb && ios.cb()\n                        } else {\n                            iosDownload();\n                        }\n                    }\n                } else {\n                    if (env.os.android) {\n                        console.log('app');\n                        \n                        androidOpenApp()\n                    } else if (env.os.ios) {\n                        iosOpenApp()\n                    }\n                }\n            },\n            // 1.third party\n            dialogBox(opt) {\n                var imageClassName = opt.imageClassName,\n                    image = opt.image\n                var box = document.createElement('div');\n                box.className = 'dialog dialog-bg';\n                box.innerHTML += '<img class=\"' + imageClassName + '\" src=\"' + image + '\"/>'\n                box.innerHTML += '    </div>';\n                box.addEventListener('click', function(e) {\n                    opt.cancel && opt.cancel(close);\n                });\n                box.addEventListener('touchmove', function(e) {\n                    e.preventDefault();\n                });\n                document.body.appendChild(box);\n                function close() {\n                    box.style.animation = 'fadeOut .2s linear';\n                    window.setTimeout(function() {\n                        document.body.removeChild(box);\n                    }, 100)\n                }\n            },\n            toBrowser(cb) {\n                this.dialogBox({\n                    image: 'https://official-web.oss-cn-beijing.aliyuncs.com/towords/avatars/wechat_bg.png',\n                    imageClassName: 'to-browser',\n                    cancel: function(close) {\n                        if (cb && (cb instanceof Function)) {\n                            cb(close);\n                        } else {\n                            close();\n                        }\n                    }\n                })\n            },\n            // third party end\n        },\n        data() {\n            return {}\n        }\n    }\n</script>\n\n<style  type='text/css'>\n    .dialog {\n        position: fixed;\n        top: 0;\n        left: 0;\n        transition: all ease-in 2s;\n    }\n    .dialog-bg {\n        height: 100%;\n        width: 100%;\n        background: rgba(32, 38, 54, .8);\n        animation: fadeIn .2s linear;\n        z-index: 9999;\n    }\n    @keyframes fadeIn {\n        0% {\n            opacity: 0;\n        }\n        100% {\n            opacity: 1;\n        }\n    }\n    @keyframes fadeOut {\n        0% {\n            opacity: 1;\n        }\n        100% {\n            opacity: 0;\n        }\n    }\n    .dialog .to-browser {\n        position: absolute;\n        right: 0;\n        top: 0;\n        margin: 40px 80px;\n        width: 200px;\n    }\n</style>"]}]}